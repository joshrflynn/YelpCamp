<% layout("Layouts/boilerplate") %>

<!-- TODO: Not needed on all pages, change CDN location -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css" rel="stylesheet" />

<div id="pageContent">
  <div id="cluster-map"></div>

  <h1 id="titleContent">All Campgrounds</h1>

  <% for (let c of cg) { %>
  <div class="card mb-3">
    <div class="row">
      <div class="col-md-4">
        <% if (c.image.length > 0) { %>
        <img style="height: 300px; width: 100%" src="<%= c.image[0].url %>" alt="" class="img-fluid" />
        <% } else { %>
        <img
          style="height: 300px; width: 100%"
          src="https://res.cloudinary.com/ditcuk4ii/image/upload/v1646888247/YelpCamp/qwg4vjzh62tndy2o6q6b_lm7ixr.jpg"
          alt=""
          class="img-fluid"
        />
        <% } %>
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title"><%= c.title %></h5>
          <p class="card-text"><%= c.description %></p>
          <p class="card-text">
            <small class="text-muted"><%= c.location %> </small>
          </p>
          <a class="btn btn-primary" href="/campgrounds/<%= c._id %> ">View <%= c.title %> </a>
        </div>
      </div>
    </div>
  </div>
  <% } %>
</div>

<script>
  const mapToken = "<%-process.env.MAPBOX_TOKEN%>";
  const campgrounds = <%-JSON.stringify(cg)%>
</script>

<script src="/JS/clusterMap.js"></script>

<style>
  #pageContent {
    width: 75%;
    margin: auto;
  }

  #titleContent {
    text-align: center;
    padding: 15px 0;
  }

  @media (max-width: 850px) {
    #pageContent {
      width: 100%;
    }
  }
</style>
